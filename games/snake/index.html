<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è´ªåƒè›‡</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* === è´ªåƒè›‡ä¸“ç”¨æ ·å¼ === */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-user-select: none; }
        
        body {
            background-color: #2c241e; /* å’Œä¸»ç«™ä¸€è‡´çš„æ·±æ£•è‰² */
            color: #d7c8b8;
            font-family: 'Courier New', monospace; /* å¤å¤å­—ä½“ */
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* 1. é¡¶éƒ¨æ ‡é¢˜ */
        .game-header {
            height: 50px;
            background-color: #3c322a;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            flex-shrink: 0;
        }

        /* 2. æ¸¸æˆå±å¹•åŒºåŸŸ (ä¸­é—´) */
        .screen-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        /* å¤å¤å±å¹•å¤–æ¡† */
        .retro-screen-bezel {
            background-color: #5e5044;
            padding: 15px;
            border-radius: 10px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 0 5px 15px rgba(0,0,0,0.5);
            position: relative;
        }

        /* å®é™…çš„æ¸¸æˆç”»å¸ƒ */
        canvas {
            background-color: #9ab09a; /* ç»å…¸çš„ GameBoy ç»¿å±å¹• */
            display: block;
            border: 2px solid #4a3f35;
            image-rendering: pixelated; /* åƒç´ åŒ–æ¸²æŸ“ */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }

        /* å±å¹•ä¸Šçš„èœå•é®ç½© (å¼€å§‹/çš®è‚¤/æ’è¡Œ) */
        .screen-menu {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); /* åŠ æ·±ä¸€ç‚¹èƒŒæ™¯ï¼Œçªå‡ºæ–‡å­— */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            z-index: 10;
            padding: 20px;
        }
        .screen-menu.hidden { display: none; }

        .menu-btn {
            background: #e6a23c;
            border: 2px solid #fff;
            color: #2c241e;
            padding: 8px 15px;
            font-family: inherit;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            width: 140px;
            text-transform: uppercase;
            box-shadow: 0 4px 0 #b37e2e; /* ç«‹ä½“æŒ‰é’®æ•ˆæœ */
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .menu-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #b37e2e;
        }
        .menu-btn:disabled {
            background: #95a5a6;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* === æ–°å¢ï¼šè¾“å…¥æ¡†æ ·å¼ === */
        .retro-input {
            background: #9ab09a;
            border: 2px solid #2c241e;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #2c241e;
            width: 160px;
            text-align: center;
            margin-bottom: 5px;
            outline: none;
        }
        .retro-input::placeholder { color: #5e5044; opacity: 0.7; }

        /* === æ–°å¢ï¼šæ’è¡Œæ¦œåˆ—è¡¨æ ·å¼ === */
        .rank-list-container {
            width: 90%;
            height: 60%;
            background: #9ab09a;
            border: 2px solid #2c241e;
            padding: 5px;
            overflow-y: auto;
            margin-bottom: 10px;
            font-size: 12px;
            color: #2c241e;
        }
        .rank-item {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px dashed #5e5044;
            padding: 4px 2px;
        }
        .rank-item:last-child { border-bottom: none; }
        .rank-rank { font-weight: bold; margin-right: 5px; }
        .rank-name { flex: 1; text-align: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .rank-score { font-weight: bold; }

        /* 3. è™šæ‹ŸæŒ‰é”®åŒºåŸŸ (åº•éƒ¨) */
        .controls-area {
            height: 40%; /* ç»™æŒ‰é”®ç•™è¶³ç©ºé—´ */
            background-color: #3c322a;
            border-top: 2px solid #5e5044;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 20px;
            flex-shrink: 0;
        }

        /* åå­—é”®å¸ƒå±€ */
        .d-pad {
            display: grid;
            grid-template-columns: 60px 60px 60px;
            grid-template-rows: 60px 60px;
            gap: 10%;
        }
        
        .d-btn {
            width: 60px; height: 60px;
            background-color: #2c241e;
            border: 2px solid #5e5044;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #95a5a6;
            box-shadow: 0 4px 0 #1a1a1a;
            cursor: pointer;
        }
        .d-btn:active {
            transform: translateY(4px);
            box-shadow: none;
            background-color: #1a1a1a;
            color: #e6a23c;
        }

        /* å¸ƒå±€å ä½ */
        .d-up { grid-column: 2; grid-row: 1; }
        .d-left { grid-column: 1; grid-row: 2; }
        .d-down { grid-column: 2; grid-row: 2; }
        .d-right { grid-column: 3; grid-row: 2; }

        /* åŠŸèƒ½é”®åŒºåŸŸ (å†²åˆº) */
        .action-pad {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .action-btn {
            width: 70px; height: 70px;
            border-radius: 50%;
            background-color: #c0392b; /* çº¢è‰²æŒ‰é’® */
            border: 4px solid #922b21;
            box-shadow: 0 5px 0 #641e16;
            display: flex;
            justify-content: center;
            align-items: center;
            color: rgba(255,255,255,0.8);
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }
        .action-btn:active {
            transform: translateY(5px);
            box-shadow: none;
            filter: brightness(1.1);
        }
        .action-label { font-size: 12px; color: #95a5a6; }

        /* åˆ†æ•°æ˜¾ç¤º */
        .score-board {
            position: absolute;
            top: 10%;
            right: 10%;
            color: #2c241e;
            font-weight: bold;
            z-index: 5;
        }

    </style>
</head>
<body>

    <!-- 1. é¡¶éƒ¨æ ‡é¢˜ -->
    <div class="game-header">
        Dionysus Felicitas
    </div>

    <!-- 2. å±å¹•åŒºåŸŸ -->
    <div class="screen-container">
        <div class="retro-screen-bezel">
            <div class="score-board">SCORE: <span id="score">0</span></div>
            
            <!-- æ¸¸æˆç”»å¸ƒ -->
            <canvas id="gameCanvas" width="300" height="300"></canvas>

            <!-- ä¸»èœå•é®ç½© -->
            <div id="menuOverlay" class="screen-menu">
                <h2 style="color:#e6a23c; text-shadow: 2px 2px 0 #2c241e;">SNAKE</h2>
                <button class="menu-btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
                <button id="skinBtn" class="menu-btn" onclick="changeSkin()">æ›´æ¢çš®è‚¤</button>
                <button class="menu-btn" onclick="showRankOverlay()">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
                <button class="menu-btn" onclick="exitGame()">é€€å‡ºæ¸¸æˆ</button>
            </div>
            
            <!-- æ¸¸æˆç»“æŸé®ç½© (å¸¦è¾“å…¥æ¡†) -->
            <div id="gameOverOverlay" class="screen-menu hidden">
                <h2 style="color:#c0392b; text-shadow: 2px 2px 0 #fff;">GAME OVER</h2>
                <p style="color:#cea688; font-weight:bold;">å¾—åˆ†: <span id="finalScore">0</span></p>
                
                <!-- æ–°å¢ï¼šè¾“å…¥åå­—åŒºåŸŸ -->
                <div style="margin: 10px 0; text-align: center;">
                    <input type="text" id="playerNameInput" class="retro-input" placeholder="è¾“å…¥åå­—(MAX 8)" maxlength="8">
                    <button id="submitScoreBtn" class="menu-btn" style="width: 100px; font-size: 12px;" onclick="submitScore()">ä¸Šä¼ åˆ†æ•°</button>
                </div>

                <button class="menu-btn" onclick="resetGame()">å†æ¥ä¸€å±€</button>
                <button class="menu-btn" onclick="showMainMenu()">è¿”å›èœå•</button>
            </div>

            <!-- æ–°å¢ï¼šæ’è¡Œæ¦œé®ç½© -->
            <div id="rankOverlay" class="screen-menu hidden">
                <h3 style="color:#e6a23c; margin-bottom: 5px;">ğŸ† æ’è¡Œæ¦œ ğŸ†</h3>
                <div id="rankList" class="rank-list-container">
                    <div style="text-align:center; padding-top:20px;">åŠ è½½ä¸­...</div>
                </div>
                <button class="menu-btn" onclick="closeRankOverlay()">è¿”å›</button>
            </div>
        </div>
    </div>

    <!-- 3. è™šæ‹ŸæŒ‰é”®åŒºåŸŸ -->
    <div class="controls-area">
        <!-- æ–¹å‘é”® -->
        <div class="d-pad">
            <div class="d-btn d-up" id="btnUp"><i class="fas fa-caret-up"></i></div>
            <div class="d-btn d-left" id="btnLeft"><i class="fas fa-caret-left"></i></div>
            <div class="d-btn d-down" id="btnDown"><i class="fas fa-caret-down"></i></div>
            <div class="d-btn d-right" id="btnRight"><i class="fas fa-caret-right"></i></div>
        </div>

        <!-- å†²åˆºé”® -->
        <div class="action-pad">
            <div class="action-btn" id="btnDash">DASH</div>
            <span class="action-label">åŠ é€Ÿ</span>
        </div>
    </div>

    <script>
         // === çš®è‚¤é…ç½® ===
        const skins = {
            default: {
                name: "å¤å¤ç»å…¸",
                bg: '#9ab09a',      // å±å¹•èƒŒæ™¯ï¼šç»å…¸ç»¿
                snake: '#2c241e',   // è›‡èº«ï¼šæ·±æ£•
                head: '#000000',    // è›‡å¤´ï¼šé»‘
                apple: '#c0392b',   // è‹¹æœï¼šçº¢
                isRound: false      // è‹¹æœå½¢çŠ¶ï¼šæ–¹å½¢
            },
            christmas: {
                name: "åœ£è¯å¿«ä¹",
                bg: '#144235',      // å±å¹•èƒŒæ™¯ï¼šåœ£è¯æ ‘æ·±ç»¿
                snake: '#ffffff',   // è›‡èº«ï¼šé›ªç™½
                head: '#c0392b',    // è›‡å¤´ï¼šåœ£è¯å¸½çº¢
                apple: '#f1c40f',   // è‹¹æœï¼šé‡‘è‰²é“ƒé“›/æ˜Ÿæ˜Ÿ
                isRound: true       // è‹¹æœå½¢çŠ¶ï¼šåœ†å½¢ (åƒè£…é¥°çƒ)
            }
        };

        let currentSkinKey = 'default'; // å½“å‰ä½¿ç”¨çš„çš®è‚¤
        // === è´ªåƒè›‡ æ¸¸æˆé€»è¾‘ ===
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const finalScoreEl = document.getElementById('finalScore');
        
        // æ¸¸æˆé…ç½®
        const gridSize = 15; // æ¯ä¸ªæ ¼å­çš„å¤§å°
        const tileCount = canvas.width / gridSize; // ä¸€è¡Œæœ‰å¤šå°‘ä¸ªæ ¼å­ (20ä¸ª)
        
        let speed = 7; // åˆå§‹é€Ÿåº¦ (æ¯ç§’å¸§æ•°)
        let score = 0;
        let gameLoop;
        let isGameRunning = false;
        let isDash = false; // æ˜¯å¦åœ¨å†²åˆº

        // è›‡çš„çŠ¶æ€
        let headX = 10;
        let headY = 10;
        let velocityX = 0;
        let velocityY = 0;
        let snakeParts = [];
        let tailLength = 2;

        // é£Ÿç‰©çš„ä½ç½®
        let appleX = 5;
        let appleY = 5;

        // === æ ¸å¿ƒåŠŸèƒ½ ===

        function startGame() {
            document.getElementById('menuOverlay').classList.add('hidden');
            document.getElementById('gameOverOverlay').classList.add('hidden');
            document.getElementById('rankOverlay').classList.add('hidden');
            resetVars();
            isGameRunning = true;
            drawGame();
        }

        function resetVars() {
            headX = 10; headY = 10;
            velocityX = 0; velocityY = 0;
            snakeParts = [];
            tailLength = 2;
            score = 0;
            speed = 7;
            scoreEl.innerText = score;
            placeApple();
        }

        function resetGame() {
            startGame();
        }

        function showMainMenu() {
            document.getElementById('gameOverOverlay').classList.add('hidden');
            document.getElementById('rankOverlay').classList.add('hidden');
            document.getElementById('menuOverlay').classList.remove('hidden');
            isGameRunning = false;
            clearTimeout(gameLoop);
        }

        function exitGame() {
            if (window.parent && window.parent.closeGame) {
                window.parent.closeGame();
            } else {
                alert("è¯·ç›´æ¥å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µ");
            }
        }

        // === æ¸¸æˆå¾ªç¯ ===
        function drawGame() {
            if (!isGameRunning) return;

            changeSnakePosition();
            let result = isGameOver();
            if (result) return;

            clearScreen();
            checkAppleCollision();
            drawApple();
            drawSnake();
            
            // å†²åˆºæ—¶é€Ÿåº¦åŠ å€
            let currentSpeed = isDash ? speed * 2 : speed;
            
            gameLoop = setTimeout(drawGame, 1000 / currentSpeed);
        }

        function isGameOver() {
            if (velocityX === 0 && velocityY === 0) return false; 

            let gameOver = false;

            // æ’å¢™æ£€æµ‹
            if (headX < 0 || headX === tileCount || headY < 0 || headY === tileCount) {
                gameOver = true;
            }

            // æ’è‡ªå·±æ£€æµ‹
            for (let i = 0; i < snakeParts.length; i++) {
                let part = snakeParts[i];
                if (part.x === headX && part.y === headY) {
                    gameOver = true;
                    break;
                }
            }

            if (gameOver) {
                finalScoreEl.innerText = score;
                
                // å‡†å¤‡ç»“ç®—ç•Œé¢
                const submitBtn = document.getElementById('submitScoreBtn');
                const nameInput = document.getElementById('playerNameInput');
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                submitBtn.disabled = false;
                submitBtn.innerText = "ä¸Šä¼ åˆ†æ•°";
                // è‡ªåŠ¨å¡«å…¥ä¸Šæ¬¡çš„åå­—
                nameInput.value = localStorage.getItem('snakePlayerName') || '';

                document.getElementById('gameOverOverlay').classList.remove('hidden');
                isGameRunning = false;
            }

            return gameOver;
        }


        function clearScreen() {
            ctx.fillStyle = skins[currentSkinKey].bg; 
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawSnake() {
            ctx.fillStyle = skins[currentSkinKey].snake; 
            for (let i = 0; i < snakeParts.length; i++) {
                let part = snakeParts[i];
                ctx.fillRect(part.x * gridSize, part.y * gridSize, gridSize - 2, gridSize - 2);
            }

            snakeParts.push(new SnakePart(headX, headY));
            while (snakeParts.length > tailLength) {
                snakeParts.shift(); 
            }

            ctx.fillStyle = skins[currentSkinKey].head; 
            ctx.fillRect(headX * gridSize, headY * gridSize, gridSize - 2, gridSize - 2);
        }

        function changeSnakePosition() {
            headX = headX + velocityX;
            headY = headY + velocityY;
        }

        function drawApple() {
            ctx.fillStyle = skins[currentSkinKey].apple;
            if (skins[currentSkinKey].isRound) {
                ctx.beginPath();
                let centerX = appleX * gridSize + gridSize / 2;
                let centerY = appleY * gridSize + gridSize / 2;
                let radius = (gridSize - 2) / 2;
                ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ctx.fill();
            } else {
                ctx.fillRect(appleX * gridSize, appleY * gridSize, gridSize - 2, gridSize - 2);
            }
        }

        function checkAppleCollision() {
            if (appleX === headX && appleY === headY) {
                appleX = Math.floor(Math.random() * tileCount);
                appleY = Math.floor(Math.random() * tileCount);
                tailLength++;
                score++;
                scoreEl.innerText = score;
                if(score % 5 === 0) speed += 0.5;
            }
        }

        function placeApple() {
            appleX = Math.floor(Math.random() * tileCount);
            appleY = Math.floor(Math.random() * tileCount);
        }

        class SnakePart {
            constructor(x, y) {
                this.x = x;
                this.y = y;
            }
        }

        // === æ§åˆ¶é€»è¾‘ ===
        document.body.addEventListener('keydown', keyDown);
        document.body.addEventListener('keyup', keyUp);

        function keyDown(event) {
            // å¦‚æœæ­£åœ¨è¾“å…¥åå­—ï¼Œä¸è¦è§¦å‘æ–¹å‘é”®ç§»åŠ¨
            if (document.activeElement.tagName === 'INPUT') return;

            if (event.code === 'Space' || event.code === 'ShiftLeft') {
                isDash = true;
            }
            if (event.keyCode === 38) { // Up
                if (velocityY === 1) return;
                velocityY = -1; velocityX = 0;
            }
            if (event.keyCode === 40) { // Down
                if (velocityY === -1) return;
                velocityY = 1; velocityX = 0;
            }
            if (event.keyCode === 37) { // Left
                if (velocityX === 1) return;
                velocityY = 0; velocityX = -1;
            }
            if (event.keyCode === 39) { // Right
                if (velocityX === -1) return;
                velocityY = 0; velocityX = 1;
            }
        }

        function keyUp(event) {
            if (event.code === 'Space' || event.code === 'ShiftLeft') {
                isDash = false;
            }
        }

        function changeSkin() {
            if (currentSkinKey === 'default') {
                currentSkinKey = 'christmas';
            } else {
                currentSkinKey = 'default';
            }
            const skinBtn = document.getElementById('skinBtn');
            skinBtn.innerText = "çš®è‚¤: " + skins[currentSkinKey].name;

            if (!isGameRunning) {
                clearScreen();
                ctx.fillStyle = skins[currentSkinKey].snake;
                ctx.fillRect(10 * gridSize, 10 * gridSize, gridSize - 2, gridSize - 2);
                ctx.fillStyle = skins[currentSkinKey].apple;
                ctx.fillRect(5 * gridSize, 5 * gridSize, gridSize - 2, gridSize - 2);
            }
        }

        // === è™šæ‹ŸæŒ‰é”®ç»‘å®š ===
        function bindBtn(id, action) {
            const btn = document.getElementById(id);
            const startAction = (e) => { e.preventDefault(); action(); };
            btn.addEventListener('mousedown', startAction);
            btn.addEventListener('touchstart', startAction);
        }

        bindBtn('btnUp', () => { if (velocityY !== 1) { velocityY = -1; velocityX = 0; } });
        bindBtn('btnDown', () => { if (velocityY !== -1) { velocityY = 1; velocityX = 0; } });
        bindBtn('btnLeft', () => { if (velocityX !== 1) { velocityY = 0; velocityX = -1; } });
        bindBtn('btnRight', () => { if (velocityX !== -1) { velocityY = 0; velocityX = 1; } });

        const dashBtn = document.getElementById('btnDash');
        const startDash = (e) => { e.preventDefault(); isDash = true; };
        const endDash = (e) => { e.preventDefault(); isDash = false; };

        dashBtn.addEventListener('mousedown', startDash);
        dashBtn.addEventListener('touchstart', startDash);
        dashBtn.addEventListener('mouseup', endDash);
        dashBtn.addEventListener('touchend', endDash);

        // ==========================================
        // === åç«¯é€šä¿¡åŠŸèƒ½ (UI ä¼˜åŒ–ç‰ˆ) ===
        // ==========================================

        const API_BASE = 'http://139.199.180.70:3000';

        // 1. æäº¤åˆ†æ•° (ç‚¹å‡»æŒ‰é’®è§¦å‘)
        function submitScore() {
            const nameInput = document.getElementById('playerNameInput');
            const submitBtn = document.getElementById('submitScoreBtn');
            const playerName = nameInput.value.trim();

            if (!playerName) {
                alert("è¯·è¾“å…¥åå­—ï¼"); // è¿™é‡Œå¯ä»¥ç”¨ alertï¼Œæˆ–è€…åšä¸€ä¸ªå°çš„æç¤ºæ–‡å­—
                return;
            }

            // é”å®šæŒ‰é’®
            submitBtn.disabled = true;
            submitBtn.innerText = "ä¸Šä¼ ä¸­...";

            // ä¿å­˜åå­—åˆ°æœ¬åœ°
            localStorage.setItem('snakePlayerName', playerName);

            fetch(`${API_BASE}/api/score`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    game: 'snake',
                    name: playerName,
                    score: score
                })
            })
            .then(res => res.json())
            .then(data => {
                submitBtn.innerText = "æˆåŠŸ!";
                // ä¸Šä¼ æˆåŠŸåï¼Œç›´æ¥è·³è½¬åˆ°æ’è¡Œæ¦œçœ‹çœ‹
                setTimeout(() => {
                    document.getElementById('gameOverOverlay').classList.add('hidden');
                    showRankOverlay();
                }, 500);
            })
            .catch(err => {
                console.error(err);
                submitBtn.disabled = false;
                submitBtn.innerText = "å¤±è´¥,é‡è¯•";
            });
        }

        // 2. æ˜¾ç¤ºæ’è¡Œæ¦œé®ç½©
        function showRankOverlay() {
            document.getElementById('menuOverlay').classList.add('hidden');
            document.getElementById('gameOverOverlay').classList.add('hidden');
            document.getElementById('rankOverlay').classList.remove('hidden');
            
            fetchRankData();
        }

        // 3. å…³é—­æ’è¡Œæ¦œé®ç½©
        function closeRankOverlay() {
            document.getElementById('rankOverlay').classList.add('hidden');
            document.getElementById('menuOverlay').classList.remove('hidden');
        }

        // 4. è·å–å¹¶æ¸²æŸ“æ’è¡Œæ¦œæ•°æ®
        function fetchRankData() {
            const listContainer = document.getElementById('rankList');
            listContainer.innerHTML = '<div style="text-align:center; padding-top:20px;">åŠ è½½ä¸­...</div>';

            fetch(`${API_BASE}/api/rank?game=snake`)
            .then(res => res.json())
            .then(list => {
                renderRankList(list);
            })
            .catch(err => {
                console.error(err);
                listContainer.innerHTML = '<div style="text-align:center; color:#c0392b;">åŠ è½½å¤±è´¥</div>';
            });
        }

        function renderRankList(list) {
            const listContainer = document.getElementById('rankList');
            listContainer.innerHTML = "";

            if (!list || list.length === 0) {
                listContainer.innerHTML = '<div style="text-align:center; padding-top:20px;">æš‚æ— æ•°æ®</div>';
                return;
            }

            list.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'rank-item';
                
                // å‰ä¸‰ååŠ ä¸ªå¥–ç‰Œå›¾æ ‡
                let rankIcon = `${index + 1}.`;
                if (index === 0) rankIcon = 'ğŸ¥‡';
                if (index === 1) rankIcon = 'ğŸ¥ˆ';
                if (index === 2) rankIcon = 'ğŸ¥‰';

                div.innerHTML = `
                    <span class="rank-rank">${rankIcon}</span>
                    <span class="rank-name">${item.name}</span>
                    <span class="rank-score">${item.score}</span>
                `;
                listContainer.appendChild(div);
            });
        }

    </script>
</body>
</html>
